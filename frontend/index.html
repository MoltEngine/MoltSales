<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Prompt Router | AI Composer</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <link href="./css/output.css" rel="stylesheet">

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body class="flex h-screen overflow-hidden bg-background text-textMain selection:bg-primary selection:text-surface">

    <!-- LEFT SIDEBAR: Context Engine -->
    <aside id="sidebar-context" class="w-80 bg-surface/50 border-r border-surfaceHighlight flex flex-col z-20">
        <!-- Brand -->
        <div class="px-5 py-5 border-b border-surfaceHighlight/50 flex items-center gap-3">
            <div
                class="w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center shadow-lg shadow-primary/30">
                <i class="ph-bold ph-lightning text-white text-lg"></i>
            </div>
            <div>
                <h1 class="font-bold text-base tracking-tight text-white leading-tight">Prompt Router</h1>
                <p class="text-[10px] text-textMuted font-medium tracking-wider uppercase">AI Sales Copilot</p>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto p-4 space-y-6">
            <!-- Tier 1: Your Product Identity -->
            <section>
                <div class="flex items-center justify-between mb-3">
                    <span class="text-[10px] font-bold text-textMuted uppercase tracking-widest">Your Product</span>
                </div>
                <div class="space-y-2.5">
                    <div>
                        <label class="block text-xs text-textMuted mb-1">Product Name</label>
                        <input type="text" id="ctx-product-name" placeholder="e.g. SalesBoost AI"
                            class="input-field py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs text-textMuted mb-1">What it does</label>
                        <input type="text" id="ctx-product-desc" placeholder="e.g. AI-powered sales outreach"
                            class="input-field py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs text-textMuted mb-1">Social Proof / Similar Company</label>
                        <input type="text" id="ctx-social-proof" placeholder="e.g. Auth0, Stripe"
                            class="input-field py-2 text-sm">
                    </div>
                </div>
            </section>

            <div class="border-t border-surfaceHighlight/50"></div>

            <!-- Tier 2: Lead / Prospect -->
            <section>
                <div class="flex items-center justify-between mb-3">
                    <span class="text-[10px] font-bold text-textMuted uppercase tracking-widest">Target Lead</span>
                    <span
                        class="text-[10px] bg-secondary/20 text-secondary px-1.5 py-0.5 rounded flex items-center gap-1">
                        <i class="ph-fill ph-sparkle"></i> Auto-Fill
                    </span>
                </div>
                <div class="space-y-2.5">
                    <div>
                        <label class="block text-xs text-textMuted mb-1">Prospect's Name</label>
                        <input type="text" id="ctx-prospect-name" placeholder="e.g. Sarah Chen"
                            class="input-field py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs text-textMuted mb-1">Job Title</label>
                        <input type="text" id="ctx-prospect-title" placeholder="e.g. VP of Sales"
                            class="input-field py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs text-textMuted mb-1">Company Name</label>
                        <input type="text" id="ctx-company-name" placeholder="e.g. Stripe"
                            class="input-field py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs text-textMuted mb-1">Industry</label>
                        <input type="text" id="ctx-industry" placeholder="e.g. Fintech"
                            class="input-field py-2 text-sm">
                    </div>
                </div>
            </section>
        </div>

        <!-- Sidebar Footer: Context Status -->
        <div class="px-4 py-3 border-t border-surfaceHighlight/50">
            <div id="context-status" class="text-xs text-textMuted flex items-center gap-2">
                <i class="ph-fill ph-circle text-surfaceHighlight text-[8px]"></i>
                <span>Fill context to enable auto-hydration</span>
            </div>
        </div>
    </aside>

    <!-- MIDDLE: The Pipeline Workspace -->
    <main class="flex-1 flex flex-col relative bg-gradient-to-b from-background to-[#11111b]">
        <!-- ========================================= -->
        <!-- PHASE 0: INPUT â€” Natural Language Search  -->
        <!-- ========================================= -->
        <header class="border-b border-surfaceHighlight/50 backdrop-blur-md px-8 py-5 z-10 w-full">
            <div class="max-w-3xl mx-auto">
                <div class="max-w-3xl mx-auto flex items-center justify-between mb-2">
                    <label class="block text-xs font-bold text-textMuted uppercase tracking-widest">
                        <i class="ph ph-chat-circle-text text-primary mr-1"></i> What do you need?
                    </label>
                    <button id="btn-toggle-debug"
                        class="text-[10px] text-textMuted hover:text-white transition-colors uppercase tracking-wider font-bold flex items-center gap-1 bg-surfaceHighlight/30 px-2 py-1 rounded">
                        <i class="ph-fill ph-terminal-window text-primary"></i> Show Debug Log
                    </button>
                </div>
                <div class="relative group">
                    <input type="text" id="user-query-input"
                        placeholder="Describe your sales scenario... (e.g. 'prospect ghosting me after I sent a proposal')"
                        class="w-full bg-surface/80 border border-surfaceHighlight rounded-xl pl-5 pr-14 py-3.5 text-sm focus:outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all font-light placeholder:text-textMuted/60 text-white shadow-inner">
                    <button id="btn-run-pipeline" title="Run Pipeline"
                        class="absolute right-2 top-1/2 -translate-y-1/2 bg-primary hover:bg-blue-500 text-white rounded-lg p-2.5 transition-all active:scale-90 shadow-lg shadow-primary/30">
                        <i class="ph-bold ph-arrow-right text-sm"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- ========================================= -->
        <!-- PIPELINE RESULTS AREA (Scrollable)        -->
        <!-- ========================================= -->
        <div id="pipeline-canvas" class="flex-1 overflow-y-auto px-8 py-6">
            <div class="max-w-3xl mx-auto space-y-5">

                <!-- Empty State -->
                <div id="empty-state"
                    class="flex flex-col items-center justify-center h-full text-center py-20 animate-fade-in">
                    <div
                        class="w-20 h-20 rounded-2xl bg-surface/50 flex items-center justify-center mb-6 border border-surfaceHighlight shadow-xl">
                        <i class="ph-duotone ph-flow-arrow text-primary text-4xl"></i>
                    </div>
                    <h2 class="text-xl font-semibold text-white mb-2">Describe a Sales Scenario</h2>
                    <p class="text-sm text-textMuted max-w-sm leading-relaxed">
                        Type a natural language request above. The 4-phase AI pipeline will find the best prompt
                        template, identify missing variables, and generate a ready-to-use sales artifact.
                    </p>
                    <div class="flex gap-2 mt-6 flex-wrap justify-center">
                        <button
                            class="example-query text-xs bg-surface/60 hover:bg-surface text-textMuted hover:text-white px-3 py-1.5 rounded-lg border border-surfaceHighlight/50 transition-all cursor-pointer">
                            Prospect ghosting me on price
                        </button>
                        <button
                            class="example-query text-xs bg-surface/60 hover:bg-surface text-textMuted hover:text-white px-3 py-1.5 rounded-lg border border-surfaceHighlight/50 transition-all cursor-pointer">
                            Cold email for a VP of Engineering
                        </button>
                        <button
                            class="example-query text-xs bg-surface/60 hover:bg-surface text-textMuted hover:text-white px-3 py-1.5 rounded-lg border border-surfaceHighlight/50 transition-all cursor-pointer">
                            Prep for a discovery call in Fintech
                        </button>
                    </div>
                </div>

                <!-- ========================================= -->
                <!-- PHASE 1: DISPATCHER RESULT                -->
                <!-- ========================================= -->
                <div id="phase-1-card" class="phase-card hidden">
                    <div class="phase-header">
                        <div class="phase-number">1</div>
                        <div>
                            <h3 class="text-sm font-semibold text-white">Dispatcher</h3>
                            <p class="text-[10px] text-textMuted">Category Routing via LLM</p>
                        </div>
                        <div id="phase-1-status" class="phase-status ml-auto">
                            <i class="ph ph-circle-notch animate-spin text-primary"></i>
                        </div>
                    </div>
                    <div id="phase-1-body" class="phase-body">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- ========================================= -->
                <!-- PHASE 2: HYBRID SEARCH RESULT             -->
                <!-- ========================================= -->
                <div id="phase-2-card" class="phase-card hidden">
                    <div class="phase-header">
                        <div class="phase-number">2</div>
                        <div>
                            <h3 class="text-sm font-semibold text-white">Hybrid Search</h3>
                            <p class="text-[10px] text-textMuted">Local Vector DB Retrieval</p>
                        </div>
                        <div id="phase-2-status" class="phase-status ml-auto">
                            <i class="ph ph-circle-notch animate-spin text-primary"></i>
                        </div>
                    </div>
                    <div id="phase-2-body" class="phase-body">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- ========================================= -->
                <!-- PHASE 3: SPECIALIST RESULT                -->
                <!-- ========================================= -->
                <div id="phase-3-card" class="phase-card hidden">
                    <div class="phase-header">
                        <div class="phase-number">3</div>
                        <div>
                            <h3 class="text-sm font-semibold text-white">Specialist</h3>
                            <p class="text-[10px] text-textMuted">Prompt Selection & Variable Extraction</p>
                        </div>
                        <div id="phase-3-status" class="phase-status ml-auto">
                            <i class="ph ph-circle-notch animate-spin text-primary"></i>
                        </div>
                    </div>
                    <div id="phase-3-body" class="phase-body">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- ========================================= -->
                <!-- PHASE 4: GENERATOR RESULT                 -->
                <!-- ========================================= -->
                <div id="phase-4-card" class="phase-card hidden">
                    <div class="phase-header">
                        <div class="phase-number">4</div>
                        <div>
                            <h3 class="text-sm font-semibold text-white">Generator</h3>
                            <p class="text-[10px] text-textMuted">Final Artifact Production</p>
                        </div>
                        <div id="phase-4-status" class="phase-status ml-auto">
                            <i class="ph ph-circle-notch animate-spin text-primary"></i>
                        </div>
                    </div>
                    <div id="phase-4-body" class="phase-body">
                        <!-- Populated by JS -->
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- RIGHT SIDEBAR: Chain of Thought Debug Panel -->
    <aside id="sidebar-debug" class="hidden w-80 bg-[#11111b] border-l border-surfaceHighlight flex flex-col z-20">
        <div class="px-5 py-4 border-b border-surfaceHighlight/50 flex items-center justify-between">
            <h2 class="font-semibold text-sm text-white tracking-tight flex items-center gap-2">
                <i class="ph-fill ph-terminal-window text-primary"></i> Chain of Thought
            </h2>
            <button id="btn-clear-log"
                class="text-[10px] text-textMuted hover:text-accent transition-colors uppercase tracking-wider font-bold">Clear</button>
        </div>

        <!-- The Log Stream -->
        <div id="debug-log" class="flex-1 overflow-y-auto p-4 font-mono text-xs leading-relaxed space-y-1.5">
            <p class="text-textMuted/50 italic">Pipeline logs will appear here...</p>
        </div>

        <!-- Debug Footer -->
        <div
            class="px-4 py-3 border-t border-surfaceHighlight/50 flex items-center justify-between text-[10px] text-textMuted">
            <span>Pipeline Status: <span id="pipeline-overall-status"
                    class="text-textMuted font-bold">IDLE</span></span>
            <span id="pipeline-duration"></span>
        </div>
    </aside>

    <script src="./js/app.js"></script>
</body>

</html>